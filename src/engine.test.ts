import { expect, test } from "vitest"
import { buildShades, buildSpectrum } from "."

test("Shade: Black to White", () => {
  expect(buildShades("#000", "#fff")).toMatchInlineSnapshot(`
    [
      {
        "a": 0,
        "b": 0,
        "l": 0.17499999885787068,
        "mode": "oklab",
      },
      {
        "a": 0,
        "b": 0,
        "l": 0.2187249985725015,
        "mode": "oklab",
      },
      {
        "a": 0,
        "b": 0,
        "l": 0.2562261983277517,
        "mode": "oklab",
      },
      {
        "a": 0,
        "b": 0,
        "l": 0.29192734049474983,
        "mode": "oklab",
      },
      {
        "a": 0,
        "b": 0,
        "l": 0.32662290049071085,
        "mode": "oklab",
      },
    ]
  `)
})

test("Shade: White to Black", () => {
  expect(buildShades("#fff", "#000")).toMatchInlineSnapshot(`
    [
      {
        "a": 0,
        "b": 0,
        "l": 0.9819999935910221,
        "mode": "oklab",
      },
      {
        "a": 0,
        "b": 0,
        "l": 0.9633419937127926,
        "mode": "oklab",
      },
      {
        "a": 0,
        "b": 0,
        "l": 0.9450384958322495,
        "mode": "oklab",
      },
      {
        "a": 0,
        "b": 0,
        "l": 0.9261377259156045,
        "mode": "oklab",
      },
      {
        "a": 0,
        "b": 0,
        "l": 0.9066888336713768,
        "mode": "oklab",
      },
    ]
  `)
})

test("Shade: White to Black (3 Steps)", () => {
  expect(
    buildShades("#fff", "#000", {
      steps: 3
    })
  ).toMatchInlineSnapshot(`
    [
      {
        "a": 0,
        "b": 0,
        "l": 0.9819999935910221,
        "mode": "oklab",
      },
      {
        "a": 0,
        "b": 0,
        "l": 0.9633419937127926,
        "mode": "oklab",
      },
      {
        "a": 0,
        "b": 0,
        "l": 0.9450384958322495,
        "mode": "oklab",
      },
    ]
  `)
})

test("Shade: Pink to White", () => {
  expect(buildShades("rgb(236, 72, 153)", "#fff")).toMatchInlineSnapshot(`
    [
      {
        "a": 0.19829634252230852,
        "b": -0.019763103328230114,
        "l": 0.6762203063027317,
        "mode": "oklab",
      },
      {
        "a": 0.1862002656284477,
        "b": -0.018557554025208076,
        "l": 0.6959708672201513,
        "mode": "oklab",
      },
      {
        "a": 0.17446964889385547,
        "b": -0.017388428121619965,
        "l": 0.7151247021741152,
        "mode": "oklab",
      },
      {
        "a": 0.162954652066861,
        "b": -0.016240791865593046,
        "l": 0.7339264713998777,
        "mode": "oklab",
      },
      {
        "a": 0.15187373572631443,
        "b": -0.015136418018732719,
        "l": 0.7520194709008872,
        "mode": "oklab",
      },
    ]
  `)
})

test("Spectrum: #000099", () => {
  expect(buildSpectrum("#000099")).toMatchInlineSnapshot(`
    {
      "+1": {
        "a": -0.021368609855994234,
        "b": -0.2050998765715967,
        "l": 0.33359095114583565,
        "mode": "oklab",
      },
      "+2": {
        "a": -0.020556602681466453,
        "b": -0.19730608126187602,
        "l": 0.35891449475428866,
        "mode": "oklab",
      },
      "+3": {
        "a": -0.01975489517688926,
        "b": -0.18961114409266283,
        "l": 0.3839168292043397,
        "mode": "oklab",
      },
      "+4": {
        "a": -0.0189449444746368,
        "b": -0.18183708718486366,
        "l": 0.4091762389393772,
        "mode": "oklab",
      },
      "+5": {
        "a": -0.018130311862227418,
        "b": -0.1740180924359145,
        "l": 0.4345816603843465,
        "mode": "oklab",
      },
      "-1": {
        "a": -0.019661781060442824,
        "b": -0.18871741755083637,
        "l": 0.2738207197870943,
        "mode": "oklab",
      },
      "-2": {
        "a": -0.017105749522585256,
        "b": -0.16418415326922764,
        "l": 0.23822402621477204,
        "mode": "oklab",
      },
      "-3": {
        "a": -0.01448856984562971,
        "b": -0.1390639778190358,
        "l": 0.2017757502039119,
        "mode": "oklab",
      },
      "-4": {
        "a": -0.012141421530637696,
        "b": -0.11653561341235197,
        "l": 0.16908807867087813,
        "mode": "oklab",
      },
      "-5": {
        "a": -0.010198794085735664,
        "b": -0.09788991526637564,
        "l": 0.14203398608353762,
        "mode": "oklab",
      },
      "0": "#000099",
    }
  `)
})
